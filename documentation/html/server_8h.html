<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>System-calls-C-Operating-systems: server.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">System-calls-C-Operating-systems
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">server.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Server functions and neccecary data structures from <a class="el" href="defines_8h.html" title="Contains the definitions used in the program.">defines.h</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="defines_8h_source.html">defines.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for server.h:</div>
<div class="dyncontent">
<div class="center"><img src="server_8h__incl.png" border="0" usemap="#server_8h" alt=""/></div>
<map name="server_8h" id="server_8h">
<area shape="rect" title="Server functions and neccecary data structures from defines.h." alt="" coords="123,5,197,32"/>
<area shape="rect" href="defines_8h.html" title="Contains the definitions used in the program." alt="" coords="119,80,201,107"/>
<area shape="rect" title=" " alt="" coords="5,155,88,181"/>
<area shape="rect" title=" " alt="" coords="112,155,208,181"/>
<area shape="rect" title=" " alt="" coords="233,155,311,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="server_8h__dep__incl.png" border="0" usemap="#server_8hdep" alt=""/></div>
<map name="server_8hdep" id="server_8hdep">
<area shape="rect" title="Server functions and neccecary data structures from defines.h." alt="" coords="5,5,80,32"/>
<area shape="rect" href="server_8c.html" title="Contains the main function of the server." alt="" coords="6,80,79,107"/>
</map>
</div>
</div>
<p><a href="server_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a48d605ff689f470746c858648f0a98c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8h.html#a48d605ff689f470746c858648f0a98c2">SIGINTSignalHandler</a> (int sig)</td></tr>
<tr class="memdesc:a48d605ff689f470746c858648f0a98c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLose all the IPCs and exit the program.  <a href="server_8h.html#a48d605ff689f470746c858648f0a98c2">More...</a><br /></td></tr>
<tr class="separator:a48d605ff689f470746c858648f0a98c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab53aa0eb44ad55d2e189f18d3bd6017b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8h.html#ab53aa0eb44ad55d2e189f18d3bd6017b">string_to_int</a> (char *string)</td></tr>
<tr class="memdesc:ab53aa0eb44ad55d2e189f18d3bd6017b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a string to int.  <a href="server_8h.html#ab53aa0eb44ad55d2e189f18d3bd6017b">More...</a><br /></td></tr>
<tr class="separator:ab53aa0eb44ad55d2e189f18d3bd6017b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a151f668151f84d15e23bd60da085c9ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8h.html#a151f668151f84d15e23bd60da085c9ce">addToMatrix</a> (<a class="el" href="structmessage__t.html">message_t</a> a, int righe)</td></tr>
<tr class="memdesc:a151f668151f84d15e23bd60da085c9ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a message to the buffer array. The buffer will be used to retrieve the pieces of files when the output file is rebuilt.  <a href="server_8h.html#a151f668151f84d15e23bd60da085c9ce">More...</a><br /></td></tr>
<tr class="separator:a151f668151f84d15e23bd60da085c9ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3979b89e7153de6f4e9c4308d60403"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8h.html#a6a3979b89e7153de6f4e9c4308d60403">findAndMakeFullFiles</a> (int righe)</td></tr>
<tr class="memdesc:a6a3979b89e7153de6f4e9c4308d60403"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find 4 pieces of a file in the buffer matrix and then uses them to create and write an output file.  <a href="server_8h.html#a6a3979b89e7153de6f4e9c4308d60403">More...</a><br /></td></tr>
<tr class="separator:a6a3979b89e7153de6f4e9c4308d60403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e6720aaa086c84a4a489b3635fc9abb"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8h.html#a4e6720aaa086c84a4a489b3635fc9abb">prepareString</a> (<a class="el" href="structmessage__t.html">message_t</a> a)</td></tr>
<tr class="memdesc:a4e6720aaa086c84a4a489b3635fc9abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the string to be written to the output file.  <a href="server_8h.html#a4e6720aaa086c84a4a489b3635fc9abb">More...</a><br /></td></tr>
<tr class="separator:a4e6720aaa086c84a4a489b3635fc9abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="server_8h.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute operations termination performed with SIGINT: At the end close all IPCs.  <a href="server_8h.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Server functions and neccecary data structures from <a class="el" href="defines_8h.html" title="Contains the definitions used in the program.">defines.h</a>. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a151f668151f84d15e23bd60da085c9ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a151f668151f84d15e23bd60da085c9ce">&#9670;&nbsp;</a></span>addToMatrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void addToMatrix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>righe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a message to the buffer array. The buffer will be used to retrieve the pieces of files when the output file is rebuilt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>message to insert in array </td></tr>
    <tr><td class="paramname">righe</td><td>- number of rows in the array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a3979b89e7153de6f4e9c4308d60403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a3979b89e7153de6f4e9c4308d60403">&#9670;&nbsp;</a></span>findAndMakeFullFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void findAndMakeFullFiles </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>righe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find 4 pieces of a file in the buffer matrix and then uses them to create and write an output file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">righe</td><td>- number of rows in the array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute operations termination performed with SIGINT: At the end close all IPCs. </p>
<p>Memorizza il percorso passato come parametro, gestisce segnali e handler, attende i segnali SIGINT o SIGUSR1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Numero argomenti passati da linea di comando (compreso il nome dell'eseguibile) </td></tr>
    <tr><td class="paramname">argv</td><td>Array di argomenti passati da linea di comando </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Exit code dell'intero programma </dd></dl>

</div>
</div>
<a id="a4e6720aaa086c84a4a489b3635fc9abb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e6720aaa086c84a4a489b3635fc9abb">&#9670;&nbsp;</a></span>prepareString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* prepareString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmessage__t.html">message_t</a>&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs the string to be written to the output file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>Message that came from server and that has to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* - string to be written to the output file </dd></dl>

</div>
</div>
<a id="a48d605ff689f470746c858648f0a98c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d605ff689f470746c858648f0a98c2">&#9670;&nbsp;</a></span>SIGINTSignalHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SIGINTSignalHandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CLose all the IPCs and exit the program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>- signal number</td></tr>
  </table>
  </dd>
</dl>
<p>Handler del segnale SIGINT.</p>
<p>Non fa niente, permette solo al processo di risvegliarsi dal pause().</p>
<p>Le funzionalita' principali vengono eseguite da <a class="el" href="client_8h.html#a8c7084a254c7cd640d66e647795ff8f6">operazioni_client0()</a> e non qui per il seguente motivo: <a href="https://man7.org/linux/man-pages/man7/signal-safety.7.html">https://man7.org/linux/man-pages/man7/signal-safety.7.html</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig</td><td>Valore intero corrispondente a SIGINT </td></tr>
  </table>
  </dd>
</dl>
<p>When performing buffered I/O on a file, the stdio functions must maintain a statically allocated data buffer along with associated counters and indexes (or pointers) that record the amount of data and the current position in the buffer. Suppose that the main program is in the middle of a call to a stdio function such as printf(3) where the buffer and associated variables have been partially updated. If, at that moment, the program is interrupted by a signal handler that also calls printf(3), then the second call to printf(3) will operate on inconsistent data, with unpredictable results.</p>
<p>When performing buffered I/O on a file, the stdio functions must maintain a statically allocated data buffer along with associated counters and indexes (or pointers) that record the amount of data and the current position in the buffer. Suppose that the main program is in the middle of a call to a stdio function such as printf(3) where the buffer and associated variables have been partially updated. If, at that moment, the program is interrupted by a signal handler that also calls printf(3), then the second call to printf(3) will operate on inconsistent data, with unpredictable results.</p>

</div>
</div>
<a id="ab53aa0eb44ad55d2e189f18d3bd6017b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53aa0eb44ad55d2e189f18d3bd6017b">&#9670;&nbsp;</a></span>string_to_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int string_to_int </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a string to int. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>- string to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int - converted string </dd></dl>
<p>Converts a string to an integer.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>

\hypertarget{server_8h}{}\doxysection{server.\+h File Reference}
\label{server_8h}\index{server.h@{server.h}}


Server functions and neccecary data structures from \mbox{\hyperlink{defines_8h}{defines.\+h}}.  


{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\newline
Include dependency graph for server.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=310pt]{server_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=136pt]{server_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{server_8h_a48d605ff689f470746c858648f0a98c2}{S\+I\+G\+I\+N\+T\+Signal\+Handler}} (int sig)
\begin{DoxyCompactList}\small\item\em C\+Lose all the I\+P\+Cs and exit the program. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{server_8h_ab53aa0eb44ad55d2e189f18d3bd6017b}{string\+\_\+to\+\_\+int}} (char $\ast$string)
\begin{DoxyCompactList}\small\item\em Convert a string to int. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{server_8h_a151f668151f84d15e23bd60da085c9ce}{add\+To\+Matrix}} (\mbox{\hyperlink{structmessage__t}{message\+\_\+t}} a, int righe)
\begin{DoxyCompactList}\small\item\em Adds a message to the buffer array. The buffer will be used to retrieve the pieces of files when the output file is rebuilt. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{server_8h_a6a3979b89e7153de6f4e9c4308d60403}{find\+And\+Make\+Full\+Files}} (int righe)
\begin{DoxyCompactList}\small\item\em Find 4 pieces of a file in the buffer matrix and then uses them to create and write an output file. \end{DoxyCompactList}\item 
char $\ast$ \mbox{\hyperlink{server_8h_a4e6720aaa086c84a4a489b3635fc9abb}{prepare\+String}} (\mbox{\hyperlink{structmessage__t}{message\+\_\+t}} a)
\begin{DoxyCompactList}\small\item\em Constructs the string to be written to the output file. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{server_8h_a0ddf1224851353fc92bfbff6f499fa97}{main}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Execute operations termination performed with S\+I\+G\+I\+NT\+: At the end close all I\+P\+Cs. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Server functions and neccecary data structures from \mbox{\hyperlink{defines_8h}{defines.\+h}}. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{server_8h_a151f668151f84d15e23bd60da085c9ce}\label{server_8h_a151f668151f84d15e23bd60da085c9ce}} 
\index{server.h@{server.h}!addToMatrix@{addToMatrix}}
\index{addToMatrix@{addToMatrix}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{addToMatrix()}{addToMatrix()}}
{\footnotesize\ttfamily void add\+To\+Matrix (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmessage__t}{message\+\_\+t}}}]{a,  }\item[{int}]{righe }\end{DoxyParamCaption})}



Adds a message to the buffer array. The buffer will be used to retrieve the pieces of files when the output file is rebuilt. 


\begin{DoxyParams}{Parameters}
{\em a} & message to insert in array \\
\hline
{\em righe} & -\/ number of rows in the array \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{server_8h_a6a3979b89e7153de6f4e9c4308d60403}\label{server_8h_a6a3979b89e7153de6f4e9c4308d60403}} 
\index{server.h@{server.h}!findAndMakeFullFiles@{findAndMakeFullFiles}}
\index{findAndMakeFullFiles@{findAndMakeFullFiles}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{findAndMakeFullFiles()}{findAndMakeFullFiles()}}
{\footnotesize\ttfamily void find\+And\+Make\+Full\+Files (\begin{DoxyParamCaption}\item[{int}]{righe }\end{DoxyParamCaption})}



Find 4 pieces of a file in the buffer matrix and then uses them to create and write an output file. 


\begin{DoxyParams}{Parameters}
{\em righe} & -\/ number of rows in the array \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{server_8h_a0ddf1224851353fc92bfbff6f499fa97}\label{server_8h_a0ddf1224851353fc92bfbff6f499fa97}} 
\index{server.h@{server.h}!main@{main}}
\index{main@{main}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Execute operations termination performed with S\+I\+G\+I\+NT\+: At the end close all I\+P\+Cs. 

Memorizza il percorso passato come parametro, gestisce segnali e handler, attende i segnali S\+I\+G\+I\+NT o S\+I\+G\+U\+S\+R1.


\begin{DoxyParams}{Parameters}
{\em argc} & Numero argomenti passati da linea di comando (compreso il nome dell\textquotesingle{}eseguibile) \\
\hline
{\em argv} & Array di argomenti passati da linea di comando \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int Exit code dell\textquotesingle{}intero programma 
\end{DoxyReturn}
\mbox{\Hypertarget{server_8h_a4e6720aaa086c84a4a489b3635fc9abb}\label{server_8h_a4e6720aaa086c84a4a489b3635fc9abb}} 
\index{server.h@{server.h}!prepareString@{prepareString}}
\index{prepareString@{prepareString}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{prepareString()}{prepareString()}}
{\footnotesize\ttfamily char$\ast$ prepare\+String (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structmessage__t}{message\+\_\+t}}}]{a }\end{DoxyParamCaption})}



Constructs the string to be written to the output file. 


\begin{DoxyParams}{Parameters}
{\em a} & Message that came from server and that has to be written \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
char$\ast$ -\/ string to be written to the output file 
\end{DoxyReturn}
\mbox{\Hypertarget{server_8h_a48d605ff689f470746c858648f0a98c2}\label{server_8h_a48d605ff689f470746c858648f0a98c2}} 
\index{server.h@{server.h}!SIGINTSignalHandler@{SIGINTSignalHandler}}
\index{SIGINTSignalHandler@{SIGINTSignalHandler}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{SIGINTSignalHandler()}{SIGINTSignalHandler()}}
{\footnotesize\ttfamily void S\+I\+G\+I\+N\+T\+Signal\+Handler (\begin{DoxyParamCaption}\item[{int}]{sig }\end{DoxyParamCaption})}



C\+Lose all the I\+P\+Cs and exit the program. 


\begin{DoxyParams}{Parameters}
{\em sig} & -\/ signal number\\
\hline
\end{DoxyParams}
Handler del segnale S\+I\+G\+I\+NT.

Non fa niente, permette solo al processo di risvegliarsi dal pause().

Le funzionalita\textquotesingle{} principali vengono eseguite da \mbox{\hyperlink{client_8h_a8c7084a254c7cd640d66e647795ff8f6}{operazioni\+\_\+client0()}} e non qui per il seguente motivo\+: \href{https://man7.org/linux/man-pages/man7/signal-safety.7.html}{\texttt{ https\+://man7.\+org/linux/man-\/pages/man7/signal-\/safety.\+7.\+html}}


\begin{DoxyParams}{Parameters}
{\em sig} & Valore intero corrispondente a S\+I\+G\+I\+NT \\
\hline
\end{DoxyParams}
When performing buffered I/O on a file, the stdio functions must maintain a statically allocated data buffer along with associated counters and indexes (or pointers) that record the amount of data and the current position in the buffer. Suppose that the main program is in the middle of a call to a stdio function such as printf(3) where the buffer and associated variables have been partially updated. If, at that moment, the program is interrupted by a signal handler that also calls printf(3), then the second call to printf(3) will operate on inconsistent data, with unpredictable results.

When performing buffered I/O on a file, the stdio functions must maintain a statically allocated data buffer along with associated counters and indexes (or pointers) that record the amount of data and the current position in the buffer. Suppose that the main program is in the middle of a call to a stdio function such as printf(3) where the buffer and associated variables have been partially updated. If, at that moment, the program is interrupted by a signal handler that also calls printf(3), then the second call to printf(3) will operate on inconsistent data, with unpredictable results.\mbox{\Hypertarget{server_8h_ab53aa0eb44ad55d2e189f18d3bd6017b}\label{server_8h_ab53aa0eb44ad55d2e189f18d3bd6017b}} 
\index{server.h@{server.h}!string\_to\_int@{string\_to\_int}}
\index{string\_to\_int@{string\_to\_int}!server.h@{server.h}}
\doxysubsubsection{\texorpdfstring{string\_to\_int()}{string\_to\_int()}}
{\footnotesize\ttfamily int string\+\_\+to\+\_\+int (\begin{DoxyParamCaption}\item[{char $\ast$}]{string }\end{DoxyParamCaption})}



Convert a string to int. 


\begin{DoxyParams}{Parameters}
{\em string} & -\/ string to convert \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int -\/ converted string 
\end{DoxyReturn}
Converts a string to an integer.